version: '2'
services:
  web:
    build: .
    volumes:
    - .:/pdf
    - /mfs/replicated/tech/papers/:/data
    ports:
    - "5050:5000"
    depends_on:
    - sass
    - generate
  sass:
    image: ubuntudesign/sass
    volumes:
    - ./static/css/:/app
    command: sass /app/style.scss style.css
  sass_watch:
    image: ubuntudesign/sass
    volumes:
    - ./static/css/:/app
    command: sass --watch /app
  generate:
    build: .
    volumes:
    - .:/pdf
    - ./html:/html
    - /mfs/replicated/tech/papers/:/data
    command: python3 main.py
